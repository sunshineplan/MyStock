<!doctype html>
<title>{% block title %}{% endblock %}</title>
<script src='https://code.jquery.com/jquery-3.4.1.min.js'></script>
<script src='https://code.jquery.com/ui/1.12.1/jquery-ui.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js'></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>
<link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>
<link rel='stylesheet' href="{{ url_for('static', filename='style.css') }}">
<nav class='navbar navbar-light topbar'>
  <a class='brand' href="{{ url_for('index') }}">My Stocks</a>
  <div class='navbar-nav flex-row'>
    {% if g.user %}
    <a class='nav-link'>{{ g.user['username'] }}</a>
    <a class='nav-link link' href="{{ url_for('auth.setting') }}">Setting</a>
    <a class='nav-link link' href="{{ url_for('auth.logout') }}">Log Out</a>
    {% else %}
    <a class='nav-link link' href="{{ url_for('auth.login') }}">Log In</a></li>
    {% endif %}
  </div>
</nav>
<div>
  <header>
    {% block header %}{% endblock %}
  </header>
  {% for message in get_flashed_messages() %}
  <div class="alert alert-danger {% if request.endpoint == 'auth.login' %}login{% else %}d-inline-flex{% endif %}">{{ message }}</div>
  {% endfor %}
  {% block content %}{% endblock %}
  <div class='indices'>
    <a id='沪'>上证指数&nbsp;&nbsp;<span class='now'>n/a</span>&nbsp;&nbsp;<span class='change'>n/a</span>&nbsp;&nbsp;<span class='percent'>n/a</span></a>
    <a id='深'>深证成指&nbsp;&nbsp;<span class='now'>n/a</span>&nbsp;&nbsp;<span class='change'>n/a</span>&nbsp;&nbsp;<span class='percent'>n/a</span></a>
    <a id='创'>创业板指&nbsp;&nbsp;<span class='now'>n/a</span>&nbsp;&nbsp;<span class='change'>n/a</span>&nbsp;&nbsp;<span class='percent'>n/a</span></a>
    <a id='中小板'>中小板指&nbsp;&nbsp;<span class='now'>n/a</span>&nbsp;&nbsp;<span class='change'>n/a</span>&nbsp;&nbsp;<span class='percent'>n/a</span></a>
  </div>
</div>
<script>
  $(function () {
    update_indices();
    setInterval(function () {
      update_indices();
    }, 30000);
  })
</script>
